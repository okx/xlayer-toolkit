# Off-CPU Profiling: I/O Bandwidth Analysis
#
# This configuration captures I/O operations with data transfer sizes
# to identify which reth functions consume the most I/O bandwidth.
#
# WARNING: This captures high-frequency events (10k-100k+ events/minute)
# Use for shorter durations (30-60 seconds) and expect larger data files.

# === I/O Syscalls (with size tracking) ===
# These capture read/write operations with byte counts
# The syscall events include the 'count' parameter showing data size
syscalls:sys_enter_read
syscalls:sys_exit_read
syscalls:sys_enter_write
syscalls:sys_exit_write
syscalls:sys_enter_pread64
syscalls:sys_exit_pread64
syscalls:sys_enter_pwrite64
syscalls:sys_exit_pwrite64

# === Block Layer Events (with size tracking) ===
# These show actual disk I/O with sector counts
block:block_rq_issue
block:block_rq_complete

# === Sync Operations ===
# Track when data is flushed to disk
syscalls:sys_enter_fsync
syscalls:sys_enter_fdatasync

# Note: To analyze the data:
# 1. Run: ./scripts/profile-reth-offcpu.sh op-reth-seq 60 ./scripts/offcpu-events-iobandwidth.conf
# 2. Analyze with: grep 'sys_enter_read\|sys_enter_write' perf-offcpu-*.script
# 3. Extract byte counts from the syscall arguments (fd, buf, count parameters)
