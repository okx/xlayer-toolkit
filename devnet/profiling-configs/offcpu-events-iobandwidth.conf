# Off-CPU Profiling: I/O Bandwidth Analysis
#
# This configuration captures I/O operations with data transfer sizes
# to identify which reth functions consume the most I/O bandwidth.
#
# WARNING: This captures high-frequency events (50k-500k+ events/minute)
# Use for shorter durations (30-60 seconds) and expect larger data files.
#
# FAST MODE: Auto-enabled by default for this config
#   - Skips slow symbolication (perf script generation)
#   - Generates quick summary with perf report instead
#   - Use analyze-io-bandwidth.sh on the .script file if you need detailed bandwidth stats
#   To force full symbolication: SKIP_SCRIPT=false ./scripts/profile-reth-offcpu.sh ...

# === I/O Syscalls (with size tracking) ===
# These capture read/write operations with byte counts
# The syscall events include the 'count' parameter showing data size
syscalls:sys_enter_read
syscalls:sys_exit_read
syscalls:sys_enter_write
syscalls:sys_exit_write
syscalls:sys_enter_pread64
syscalls:sys_exit_pread64
syscalls:sys_enter_pwrite64
syscalls:sys_exit_pwrite64

# === Block Layer Events (with size tracking) ===
# These show actual disk I/O with sector counts
block:block_rq_issue
block:block_rq_complete

# === Sync Operations ===
# Track when data is flushed to disk
syscalls:sys_enter_fsync
syscalls:sys_enter_fdatasync

# Note: To analyze the data:
# 1. Run: ./scripts/profile-reth-offcpu.sh op-reth-seq 60 ./profiling-configs/offcpu-events-iobandwidth.conf
# 2. Analyze with: ./scripts/analyze-io-bandwidth.sh ./profiling/op-reth-seq/perf-offcpu-{timestamp}.script
