# Off-CPU Profiling: Context Switch Analysis
#
# This configuration focuses on context switches to identify which reth
# functions cause threads to go off-CPU most frequently.
#
# WARNING: This captures VERY high-frequency events (50k-150k samples per minute)
# Recommended duration: 10-30 seconds (avoid 60+ seconds)
# With SKIP_SCRIPT=false, expect 2-5GB .script files for 30 seconds
#
# FAST MODE: Auto-enabled by default for this config
#   - Skips slow symbolication (perf script generation)
#   - Generates quick summary with perf report instead
#   - ~10x faster for high-frequency events
#   To force full symbolication: SKIP_SCRIPT=false ./scripts/profile-reth-offcpu.sh ...

# === Context Switch Events ===
# Captures when threads are switched off-CPU
sched:sched_switch

# === Lock Contention (for correlation) ===
# Include futex to correlate context switches with lock waits
syscalls:sys_enter_futex
syscalls:sys_exit_futex
syscalls:sys_enter_futex_wait
syscalls:sys_exit_futex_wait

# === Disk Sync (for correlation) ===
# Include fsync to correlate context switches with I/O
syscalls:sys_enter_fsync
syscalls:sys_enter_fdatasync
